<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Stream Sync - –ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    /* –®–∞–ø–∫–∞ */
    .header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    /* –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç */
    .main-content {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    /* –ü–ª–µ—î—Ä */
    .player-section {
      background: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }

    .player-wrapper {
      margin-bottom: 20px;
    }

    .player-info {
      padding: 15px;
      background: #f9f9f9;
      border-radius: 12px;
      margin-top: 15px;
    }

    .player-info h3 {
      margin-bottom: 10px;
      color: #333;
      font-size: 1.2rem;
    }

    .info-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #e5e5e5;
    }

    .info-item:last-child {
      border-bottom: none;
    }

    .info-label {
      color: #666;
      font-weight: 500;
    }

    .info-value {
      color: #333;
      font-weight: 600;
    }

    /* –ö–∞—Å—Ç–æ–º–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥ */
    .schedule-section {
      background: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      max-height: 800px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .schedule-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #D4AF37;
    }

    .schedule-header h2 {
      color: #333;
      font-size: 1.5rem;
      margin: 0;
    }

    .badge {
      background: #D4AF37;
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .schedule-list {
      list-style: none;
      overflow-y: auto;
      flex: 1;
      padding-right: 10px;
    }

    .schedule-list::-webkit-scrollbar {
      width: 8px;
    }

    .schedule-list::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }

    .schedule-list::-webkit-scrollbar-thumb {
      background: #D4AF37;
      border-radius: 4px;
    }

    .schedule-list::-webkit-scrollbar-thumb:hover {
      background: #C19B2F;
    }

    .schedule-item {
      background: #f9f9f9;
      padding: 15px;
      margin-bottom: 12px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      border-left: 4px solid transparent;
      position: relative;
    }

    .schedule-item:hover {
      background: #f0f0f0;
      transform: translateX(5px);
      border-left-color: #D4AF37;
    }

    .schedule-item.active {
      background: linear-gradient(135deg, #FFF8DC, #FFFACD);
      border-left-color: #D4AF37;
      box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
    }

    .schedule-item.active::before {
      content: '‚ñ∂';
      position: absolute;
      left: -2px;
      top: 50%;
      transform: translateY(-50%);
      color: #D4AF37;
      font-size: 20px;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .schedule-item.played {
      opacity: 0.5;
    }

    .schedule-item.played .item-title::after {
      content: ' ‚úì';
      color: #4ade80;
      font-weight: bold;
    }

    .item-number {
      display: inline-block;
      background: #D4AF37;
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      text-align: center;
      line-height: 28px;
      font-weight: 600;
      font-size: 0.85rem;
      margin-right: 10px;
    }

    .schedule-item.played .item-number {
      background: #9ca3af;
    }

    .schedule-item.active .item-number {
      background: #667eea;
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .item-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 6px;
      font-size: 1rem;
    }

    .item-meta {
      display: flex;
      gap: 15px;
      font-size: 0.85rem;
      color: #666;
    }

    .item-meta span {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .status-live {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #ef4444;
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 700;
    }

    .status-live::before {
      content: '';
      width: 8px;
      height: 8px;
      background: white;
      border-radius: 50%;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
    .stats-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }

    .stat-icon {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 5px;
    }

    .stat-label {
      color: #666;
      font-size: 0.9rem;
    }

    /* –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–∞–Ω–µ–ª—å */
    .control-panel {
      background: white;
      padding: 20px;
      border-radius: 16px;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .control-panel h3 {
      margin-bottom: 15px;
      color: #333;
    }

    .control-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .ctrl-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.9rem;
    }

    .ctrl-btn-primary {
      background: #667eea;
      color: white;
    }

    .ctrl-btn-primary:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .ctrl-btn-secondary {
      background: #f3f4f6;
      color: #333;
    }

    .ctrl-btn-secondary:hover {
      background: #e5e7eb;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å */
    @media (max-width: 1024px) {
      .main-content {
        grid-template-columns: 1fr;
      }

      .header h1 {
        font-size: 2rem;
      }
    }

    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .header h1 {
        font-size: 1.5rem;
      }

      .stats-section {
        grid-template-columns: repeat(2, 1fr);
      }

      .control-buttons {
        flex-direction: column;
      }

      .ctrl-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- –®–∞–ø–∫–∞ -->
    <div class="header">
      <h1>üé¨ YouTube Stream Sync</h1>
      <p>–ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º —Ä–æ–∑–∫–ª–∞–¥–æ–º —Ç–∞ –≤—Å—ñ–º–∞ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏</p>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-content">
      <!-- –ü–ª–µ—î—Ä -->
      <div class="player-section">
        <div class="player-wrapper">
          <div id="my-player"></div>
        </div>

        <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø–æ—Ç–æ—á–Ω–µ –≤—ñ–¥–µ–æ -->
        <div class="player-info">
          <h3>üì∫ –ó–∞—Ä–∞–∑ –≤—ñ–¥—Ç–≤–æ—Ä—é—î—Ç—å—Å—è:</h3>
          <div class="info-item">
            <span class="info-label">–ù–∞–∑–≤–∞:</span>
            <span class="info-value" id="current-title">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">–ù–æ–º–µ—Ä –≤—ñ–¥–µ–æ:</span>
            <span class="info-value" id="current-number">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">–í—Å—å–æ–≥–æ –≤—ñ–¥–µ–æ:</span>
            <span class="info-value" id="total-videos">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">–ß–∞—Å –ø–æ—á–∞—Ç–∫—É:</span>
            <span class="info-value" id="start-time">-</span>
          </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è -->
        <div class="control-panel">
          <h3>üéÆ –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è</h3>
          <div class="control-buttons">
            <button class="ctrl-btn ctrl-btn-primary" onclick="testControls.play()">
              ‚ñ∂Ô∏è Play
            </button>
            <button class="ctrl-btn ctrl-btn-secondary" onclick="testControls.pause()">
              ‚è∏Ô∏è Pause
            </button>
            <button class="ctrl-btn ctrl-btn-secondary" onclick="testControls.stop()">
              ‚èπÔ∏è Stop
            </button>
            <button class="ctrl-btn ctrl-btn-secondary" onclick="testControls.prev()">
              ‚èÆÔ∏è –ü–æ–ø–µ—Ä–µ–¥–Ω—î
            </button>
            <button class="ctrl-btn ctrl-btn-secondary" onclick="testControls.next()">
              ‚è≠Ô∏è –ù–∞—Å—Ç—É–ø–Ω–µ
            </button>
            <button class="ctrl-btn ctrl-btn-secondary" onclick="testControls.random()">
              üîÄ –í–∏–ø–∞–¥–∫–æ–≤–µ
            </button>
          </div>
        </div>
      </div>

      <!-- –ö–∞—Å—Ç–æ–º–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥ -->
      <div class="schedule-section">
        <div class="schedule-header">
          <h2>üìã –†–æ–∑–∫–ª–∞–¥</h2>
          <span class="badge" id="schedule-badge">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
        </div>
        <ul class="schedule-list" id="custom-schedule">
          <li style="text-align: center; padding: 40px; color: #999;">
            –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É...
          </li>
        </ul>
      </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats-section">
      <div class="stat-card">
        <div class="stat-icon">üé¨</div>
        <div class="stat-value" id="stat-total">0</div>
        <div class="stat-label">–í—Å—å–æ–≥–æ –≤—ñ–¥–µ–æ</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">‚ñ∂Ô∏è</div>
        <div class="stat-value" id="stat-played">0</div>
        <div class="stat-label">–í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–æ</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">‚è±Ô∏è</div>
        <div class="stat-value" id="stat-remaining">0</div>
        <div class="stat-label">–ó–∞–ª–∏—à–∏–ª–æ—Å—å</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">‚è∞</div>
        <div class="stat-value" id="stat-duration">0:00</div>
        <div class="stat-label">–ó–∞–≥–∞–ª—å–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å</div>
      </div>
    </div>
  </div>

  <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ -->
  <script src="youtube-stream-sync.js"></script>

  <script>
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–ª–µ—î—Ä–∞ –∑ –í–°–Ü–ú–ê –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    const stream = new YouTubeStreamSync({
      // –û—Å–Ω–æ–≤–Ω—ñ
      container: '#my-player',
      playlistUrl: 'https://raw.githubusercontent.com/christian-word/hristian-media/main/json/livestream_daily.json',
      
      // –¢–µ–º–∞
      theme: 'light',
      
      // –†–æ–∑–º—ñ—Ä
      width: '100%',
      maxWidth: '100%',
      aspectRatio: '16:9',
      
      // –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª
      autoplay: false,
      showSchedule: false,  // ‚Üê –í–ò–ú–ö–ù–£–õ–ò –≤–±—É–¥–æ–≤–∞–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥
      showControls: true,
      
      // –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è
      locale: 'uk-UA',
      timezone: 0,
      
      // –Ø–∫—ñ—Å—Ç—å
      quality: 'default',
      
      // Callbacks
      onReady: (instance) => {
        console.log('‚úÖ –ü–ª–µ—î—Ä –≥–æ—Ç–æ–≤–∏–π!');
        initCustomSchedule(instance);
        updateStats(instance);
      },
      
      onPlay: (index) => {
        console.log('‚ñ∂Ô∏è –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ–¥–µ–æ:', index);
        updateCurrentInfo(stream);
        updateCustomSchedule(stream);  // ‚Üê –î–û–î–ê–õ–ò –¢–£–¢
        updateStats(stream);
      },
      
      onVideoChange: (index, video) => {
        console.log('üîÑ –ó–º—ñ–Ω–∞ –≤—ñ–¥–µ–æ:', video.title);
        updateCustomSchedule(stream);
        updateCurrentInfo(stream);
        updateStats(stream);
      },
      
      onError: (error) => {
        console.error('‚ùå –ü–æ–º–∏–ª–∫–∞:', error);
        alert('–ü–æ–º–∏–ª–∫–∞: ' + error.message);
      }
    });

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ä–æ–∑–∫–ª–∞–¥—É
    function initCustomSchedule(stream) {
      const schedule = stream.getSchedule();
      const startTime = stream.getBroadcastStartTime();
      const container = document.getElementById('custom-schedule');
      
      container.innerHTML = '';
      
      schedule.forEach((video, index) => {
        const li = document.createElement('li');
        li.className = 'schedule-item';
        li.dataset.index = index;
        
        // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —á–∞—Å—É
        const videoTime = new Date(startTime.getTime() + video.startTime * 1000);
        const hours = videoTime.getHours().toString().padStart(2, '0');
        const minutes = videoTime.getMinutes().toString().padStart(2, '0');
        
        // –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å
        const durationMin = Math.floor(video.duration / 60);
        const durationSec = video.duration % 60;
        
        li.innerHTML = `
          <div style="display: flex; align-items: center;">
            <span class="item-number">${index + 1}</span>
            <div style="flex: 1;">
              <div class="item-title">${video.title || '–í—ñ–¥–µ–æ #' + (index + 1)}</div>
              <div class="item-meta">
                <span>üïê ${hours}:${minutes}</span>
                <span>‚è±Ô∏è ${durationMin}:${durationSec.toString().padStart(2, '0')}</span>
              </div>
            </div>
          </div>
        `;
        
        li.onclick = () => {
          stream.goToVideo(index);
        };
        
        container.appendChild(li);
      });
      
      // –û–Ω–æ–≤–ª—é—î–º–æ –±–µ–π–¥–∂
      document.getElementById('schedule-badge').textContent = `${schedule.length} –≤—ñ–¥–µ–æ`;
    }

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è UI —Ä–æ–∑–∫–ª–∞–¥—É
    function updateCustomSchedule(stream) {
      const currentIndex = stream.getCurrentIndex();
      const items = document.querySelectorAll('.schedule-item');
      
      items.forEach((item, index) => {
        item.classList.remove('active', 'played');
        
        // –í–∏–¥–∞–ª—è—î–º–æ LIVE badge —è–∫—â–æ —î
        const existingBadge = item.querySelector('.status-live');
        if (existingBadge) {
          existingBadge.remove();
        }
        
        if (index < currentIndex) {
          item.classList.add('played');
        } else if (index === currentIndex) {
          item.classList.add('active');
          
          // –î–æ–¥–∞—î–º–æ LIVE badge
          const badge = document.createElement('span');
          badge.className = 'status-live';
          badge.textContent = 'LIVE';
          item.querySelector('.item-meta').appendChild(badge);
          
          // –ü—Ä–æ–∫—Ä—É—á—É—î–º–æ –¥–æ –ø–æ—Ç–æ—á–Ω–æ–≥–æ
          item.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      });
    }

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –ø–æ—Ç–æ—á–Ω–µ –≤—ñ–¥–µ–æ
    function updateCurrentInfo(stream) {
      const current = stream.getCurrentVideo();
      const currentIndex = stream.getCurrentIndex();
      const schedule = stream.getSchedule();
      const startTime = stream.getBroadcastStartTime();
      
      if (current) {
        document.getElementById('current-title').textContent = 
          current.title || '–í—ñ–¥–µ–æ #' + (currentIndex + 1);
        document.getElementById('current-number').textContent = 
          `${currentIndex + 1} –∑ ${schedule.length}`;
      }
      
      document.getElementById('total-videos').textContent = schedule.length;
      document.getElementById('start-time').textContent = 
        startTime.toLocaleTimeString('uk-UA', { hour: '2-digit', minute: '2-digit' });
    }

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    function updateStats(stream) {
      const schedule = stream.getSchedule();
      const currentIndex = stream.getCurrentIndex();
      
      // –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
      document.getElementById('stat-total').textContent = schedule.length;
      
      // –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–æ
      document.getElementById('stat-played').textContent = currentIndex;
      
      // –ó–∞–ª–∏—à–∏–ª–æ—Å—å
      document.getElementById('stat-remaining').textContent = schedule.length - currentIndex;
      
      // –ó–∞–≥–∞–ª—å–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å
      const totalDuration = schedule.reduce((sum, video) => sum + video.duration, 0);
      const hours = Math.floor(totalDuration / 3600);
      const minutes = Math.floor((totalDuration % 3600) / 60);
      document.getElementById('stat-duration').textContent = `${hours}:${minutes.toString().padStart(2, '0')}`;
    }

    // –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–∞–Ω–µ–ª—å
    const testControls = {
      play: () => {
        stream.play();
      },
      
      pause: () => {
        stream.pause();
      },
      
      stop: () => {
        stream.stop();
      },
      
      prev: () => {
        const current = stream.getCurrentIndex();
        if (current > 0) {
          stream.goToVideo(current - 1);
        }
      },
      
      next: () => {
        const current = stream.getCurrentIndex();
        const total = stream.getSchedule().length;
        if (current < total - 1) {
          stream.goToVideo(current + 1);
        }
      },
      
      random: () => {
        const total = stream.getSchedule().length;
        const randomIndex = Math.floor(Math.random() * total);
        stream.goToVideo(randomIndex);
      }
    };
  </script>
</body>
</html>
